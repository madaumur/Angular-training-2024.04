<form [formGroup]="form" (submit)="onSubmit()">
  <h2>Register</h2>
  <label>
    Username :
    <input
      formControlName="username"
      [class.invalid]="isInvalid('username')"
      type="text"
    />
    <app-error-message [displayed]="hasError('username', 'required')">
      username is required
    </app-error-message>
    <app-error-message [displayed]="hasError('username', 'maxlength')">
      username need less than 15 char
    </app-error-message>
  </label>

  <label>
    Email :
    <input
      formControlName="email"
      [class.invalid]="isInvalid('email')"
      type="email"
    />
    <app-error-message [displayed]="hasError('email', 'required')">
      email is required
    </app-error-message>
    <app-error-message [displayed]="hasError('email', 'email')">
      email need to be valid
    </app-error-message>
  </label>

  <label>
    Password :
    <input
      formControlName="password"
      [class.invalid]="isInvalid('password')"
      [type]="pwdVisible ? 'text' : 'password'"
    />
    <app-error-message [displayed]="hasError('password', 'required')">
      password is required
    </app-error-message>
    <app-error-message [displayed]="hasError('password', 'minlength')">
      password need at least 6 char
    </app-error-message>
  </label>
  <label>
    Confirm Password
    <input
      [formControl]="confirmPassword"
      [class.invalid]="isInvalid(confirmPassword)"
      [type]="pwdVisible ? 'text' : 'password'"
      required
      minlength="5"
    />
    <app-error-message [displayed]="hasError(confirmPassword, 'required')">
      password is required
    </app-error-message>
    <app-error-message [displayed]="hasError(confirmPassword, 'minlength')">
      password need at least 6 char
    </app-error-message>
    <app-error-message [displayed]="hasError(confirmPassword, 'mustmatch')">
      password need to be the same
    </app-error-message>
  </label>
  <button type="button" (click)="pwdVisible = !pwdVisible">
    {{ pwdVisible ? "Masquer MDP" : "Voir MDP" }}
  </button>

  <button>Enregistrer</button>
</form>
